{% extends 'layouts/base.html' %}
{% load static appmsw_tags i18n admin_adminlte %}

{% block title %}{% appmsw_tags_get_env 'title' %}{% endblock title %}

{% block extrastyle %}

  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="{% static 'plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}">
  <!-- iCheck -->
  <link rel="stylesheet" href="{% static 'plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}">
  <!-- JQVMap -->
  <link rel="stylesheet" href="{% static 'plugins/jqvmap/jqvmap.min.css' %}">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="{% static 'plugins/daterangepicker/daterangepicker.css' %}">
  <!-- summernote -->
  <link rel="stylesheet" href="{% static 'plugins/summernote/summernote-bs4.min.css' %}">

{% endblock extrastyle %}

{% block bodyclass %} 
  hold-transition sidebar-mini layout-fixed layout-footer-fixed dark-mode layout-navbar-fixed 
{% endblock bodyclass %}

{% block content %}
{% appmsw_tags_get_env 'title'  as app_title %}
{% appmsw_tags_get_env 'img'    as app_icon %}
{% appmsw_tags_get_env 'footer' as app_footer %}
{% appmsw_tags_get_env 'iris'   as app_iris %}
{% appmsw_tags_get_env 'APPMSW_PARAM_NANE'   as app_param_name %}
{% get_side_menu as custom_side_menu_list %}
{% admin_get_menu as app_list %} 
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">{{ app_title }} </h1>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <!-- Small boxes (Stat box) -->
        <div class="row">
          <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-info">
              <div class="inner">
                <h3>{{ app_title }}</h3>

                <p>{% trans 'Custom title' %}</p>
              </div>
              <div class="icon">
                <i class="fas fa-hand-point-left"></i>
              </div>
              <a href="#" data-toggle="modal" data-target="#modal-info" class="appmsw-more-info small-box-footer">{% trans 'More info' %} <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-success">
              <div class="inner">
                <img src="{{ app_icon }}" class="brand-image img-circle elevation-3"  style="opacity: .8" /> 
                <P> </P>
                <p>{% trans 'Custom Icon' %}</p>
              </div>
              <div class="icon">
                <i class="fab fa-connectdevelop"></i>
              </div>
              <a href="#" class="appmsw-more-info small-box-footer" data-toggle="modal" data-target="#modal-success" >{% trans 'More info' %} <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-warning">
              <div class="inner">
                <h3>{{ app_footer }}</h3>

                <p>{% trans 'Custom footer' %}</p>
              </div>
              <div class="icon">
                <i class="fas fa-download"></i>
              </div>
              <a href="#" class="appmsw-more-info small-box-footer" data-toggle="modal" data-target="#modal-warning" >{% trans 'More info' %} <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
          <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-danger">
              <div class="inner">
                <h3>{% trans 'Project variables' %}</h3>
                <p>Param name:{{ app_param_name }} </p>
                <p>{% trans '...and other project variables can be seen if you log in as developer' %}</p>
              </div>
              <div class="icon">
                <i class="fab fa-pagelines"></i>
              </div>
              <a href="#"  data-toggle="modal" data-target="#modal-danger"   class="appmsw-more-info small-box-footer">{% trans 'More info' %} <i class="fas fa-arrow-circle-right"></i></a>
            </div>
          </div>
          <!-- ./col -->
        </div>
        <!-- /.row -->
        <!-- Main row -->
        <div class="row">
          <!-- Left col -->
          <section class="col-lg-5 connectedSortable">
             <!-- /.card-body-->
              <div style="display:none" class="card-footer bg-transparent">
                <div class="row">
                  <div class="col-4 text-center">
                    <div id="sparkline-1"></div>
                    
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <div id="sparkline-2"></div>
                    
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <div id="sparkline-3"></div>
                    
                  </div>
                  <!-- ./col -->
                </div>
                <!-- /.row -->
              </div>
            <!-- /.card -->

            <!-- Calendar -->
            <div class="card bg-gradient-success">
              <div class="card-header border-0">

                <h3 class="card-title">
                  <i class="far fa-calendar-alt"></i>
                  Calendar
                </h3>
                <!-- tools card -->
                <div class="card-tools">
                  <!-- button with a dropdown -->
                  <div class="btn-group">
                    <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" data-offset="-52">
                      <i class="fas fa-bars"></i>
                    </button>
                    <div class="dropdown-menu" role="menu">
                      <a href="#" class="dropdown-item">Add new event</a>
                      <a href="#" class="dropdown-item">Clear events</a>
                      <div class="dropdown-divider"></div>
                      <a href="#" class="dropdown-item">View calendar</a>
                    </div>
                  </div>
                  <button type="button" class="btn btn-success btn-sm" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-success btn-sm" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
                <!-- /. tools -->
              </div>
              <!-- /.card-header -->
              <div class="card-body pt-0">
                <!--The calendar -->
                <div id="calendar" style="width: 100%"></div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
            {% if request.user.is_authenticated %}
            <i class="fas fa-hand-point-left"></i> {% trans 'Select items from the side menu' %}
            {% else %}
              Please <a title="Login" href="/accounts/login/" class="small-box-footer">{% trans 'Sign IN' %}</a> or <a title="register" href="/accounts/register/" class="small-box-footer">{% trans 'Sign UP' %}</a>
            {% endif %} 

          </section>
          <!-- right col -->
        </div>
        <!-- /.row (main row) -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>






  <div class="modal fade" id="modal-info">
    <div class="modal-dialog modal-xl">
      <div class="modal-content bg-info">
        <div class="modal-header">
          <h4 class="modal-title">{{app_title}}l</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          {% if request.user.is_authenticated %}
          <p>
            In the .env file add a variable
            <b>APPMSW_LOGO_TITLE={{app_title}}</b>
          </p>
          {% if request.user.is_superuser %}
            <p>
            Load the function module in the template
            <b><span>{</span><span>%</span> load appmsw_tags <span>%</span><span>}</span></b>
          </p>
            <p>
            Define an alias
            <b><span>{</span><span>%</span> appmsw_tags_get_env 'title' as app_title <span>%</span><span>}</span></b>
          </p><p>
            And call the value of the variable
            <b><span>{</span><span>{</span> app_title <span>}</span><span>}</span></b>
          </p>
          {% endif %} 
          {% else %}
            Please <a title="Login" href="/accounts/login/" class="small-box-footer">{% trans 'Sign IN' %}</a> or <a title="register" href="/accounts/register/" class="small-box-footer">{% trans 'Sign UP' %}</a>
          {% endif %} 

        </div>
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>

        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
  <!-- /.modal -->
  <div class="modal fade" id="modal-warning">
    <div class="modal-dialog modal-xl">
      <div class="modal-content bg-warning">
        <div class="modal-header">
          <h4 class="modal-title">{{ app_footer }}</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          {% if request.user.is_authenticated %}
          <p>
          In the .env file add a variable
          <b>APPMSW_LOGO_FOOTER={{ app_footer }}</b>
        </p>
        {% if request.user.is_superuser %}
          <p>
          Load the function module in the template
          <b><span>{</span><span>%</span> load appmsw_tags <span>%</span><span>}</span></b>
        </p>
          <p>
          Define an alias
          <b><span>{</span><span>%</span> appmsw_tags_get_env 'footer' as app_footer <span>%</span><span>}</span></b>
        </p><p>
          And call the value of the variable
          <b><span>{</span><span>{</span> app_footer <span>}</span><span>}</span></b>
        </p>
        {% endif %} 
        {% else %}
          Please <a title="Login" href="/accounts/login/" class="small-box-footer">{% trans 'Sign IN' %}</a> or <a title="register" href="/accounts/register/" class="small-box-footer">{% trans 'Sign UP' %}</a>
        {% endif %} 

        </div>
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-outline-dark" data-dismiss="modal">Close</button>

        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
  <!-- /.modal -->

  <div class="modal fade" id="modal-success">
    <div class="modal-dialog dialog modal-xl">
      <div class="modal-content bg-success">
        <div class="modal-header">
          <h4 class="modal-title">Icon <img src="{{ app_icon }}" class="brand-image img-circle elevation-3"  style="opacity: .8" /> </h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          {% if request.user.is_authenticated %}
          <p>
            In the .env file add a variable
            <b>APPMSW_LOGO_IMG=data:image/png;base64,iVBORw0KGgoAAAAN....</b>
          </p>
          {% if request.user.is_superuser %}
            <p>
            Load the function module in the template<p>
            <b><span>{</span><span>%</span> load appmsw_tags <span>%</span><span>}</span></b>
          </p>
            <p>
            Define an alias<p>
            <b><span>{</span><span>%</span> appmsw_tags_get_env 'img' as app_footer <span>%</span><span>}</span></b>
          </p><p>
            And call the value of the variable<p>
            <b>&lt; img src="<span>{</span><span>{</span> app_icon <span>}</span><span>}</span>" class="brand-image img-circle elevation-3"  style="opacity: .8" /<span>&gt;</span>
            </b></p>
            {% endif %} 
            {% else %}
              Please <a title="Login" href="/accounts/login/" class="small-box-footer">{% trans 'Sign IN' %}</a> or <a title="register" href="/accounts/register/" class="small-box-footer">{% trans 'Sign UP' %}</a>
            {% endif %} 

        </div>
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
          <!--<button type="button" class="btn btn-outline-light">Save changes</button>-->
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
  <!-- /.modal -->

  <div class="modal fade" id="modal-danger" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal-danger" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
      <div class="modal-content bg-danger">
        <div class="modal-header">
          <h4 class="modal-title">{% trans 'Project variables' %}</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
        {% if request.user.is_authenticated %}
        <p>
          {% trans 'In the .env file add a variable' %}
        </p>
        {% appmsw_tags_get_env 'APPMSW_IRIS_URL'  as app_iris_url %}
        <p>APPMSW_IRIS_URL = <b>{{ app_iris_url }}</b></p>
         {% if request.user.is_superuser %}
          <p>
            {% trans 'Load the function module in the template' %}
          <b><span>{</span><span>%</span> load appmsw_tags <span>%</span><span>}</span></b>
        </p>
          <p>
            {% trans 'Define an alias' %}
          <b><span>{</span><span>%</span> appmsw_tags_get_env 'iris' as app_iris <span>%</span><span>}</span></b>
        </p><p>
          {% trans 'And call the value of the variable' %}
          <b><span>{</span><span>{</span> app_iris <span>}</span><span>}</span></b>
        </p>
          <p>
          {{ app_iris }}
          </p>
          <p>
           {% autoescape off %}
            {% appmsw_tags_get_env "iris_footer" %}
           {% endautoescape %}
          </p>
          <hr>
          <p>APPMSW_LOGO_TITLE = <b>{{ app_title }}</b></p>  
          <p>APPMSW_LOGO_FOOTER = <b>{{ app_footer }}</b></p>  
          <p>APPMSW_LOGO_IMG = <b>{{ app_icon }}</b></p>  
          <p>APPMSW_IRIS_URL = <b>{{ app_iris_url }}</b></p>  
            {% appmsw_tags_get_env 'APPMSW_Trans_RapidAPI_HostKey'   as app_var %}
          <p>APPMSW_Trans_RapidAPI_HostKey = <b>{{ app_var }}</b></p>  
          <p>IRIS host: <b>{{ app_iris.host }}</b></p>
          <p>IRIS instance:{{ app_iris.instance }}</p>
          <p>iris: <b>{{ app_iris }}</b></p>
          <p>system_menu: <b>{{ app_list }}</b></p>
          <p>custom_side_menu: <b>{{ custom_side_menu_list }}</b></p>
          
          <hr>
          <p>APPMSW_PARAM_NANE = <b>{{ app_param_name }}</b></p>  
          {% trans 'This parameter node will override all explicitly specified variables' %}
          {% appmsw_tags_get_env 'param_name_all'   as app_var %}
          <p>{% trans 'Param node all fields' %}: <b>{{ app_var }}</b></p>  
                    
          {% endif %} 
          {% else %}
            Please <a href="/accounts/login/" data-toggle="tooltip" data-placement="top" title="Login" >{% trans 'Sign IN' %}</a> or 
            <a title="register" href="/accounts/register/" class="small-box-footer">{% trans 'Sign UP' %}</a>
          {% endif %} 
        </div>
        <div class="modal-footer justify-content-between">
          <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
 
        </div>
      </div>
      <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
  </div>
  <!-- /.modal -->

  {% endblock content %}

  {% block extra_scripts %}
  
  {% if not request.user.username == 'developer' %}
  <script>
    $( ".appmsw-more-info" ).hide();
  </script>
  {% endif %}

  
    <!-- jQuery UI 1.11.4 -->
    <script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
      $.widget.bridge('uibutton', $.ui.button)
      //hide modal windows
      $(document).on('keyup', function(e) {
	      if ( e.key == "Escape" ) {
		    $( ".close" ).click();
        //$( "#popup" ).hide();
	    }

});
    </script>

    <!-- ChartJS -->
    <script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>
    <!-- Sparkline -->
    <script src="{% static 'plugins/sparklines/sparkline.js' %}"></script>
    <!-- JQVMap -->
    <script src="{% static 'plugins/jqvmap/jquery.vmap.min.js' %}"></script>
    <script src="{% static 'plugins/jqvmap/maps/jquery.vmap.usa.js' %}"></script>
    <!-- jQuery Knob Chart -->
    <script src="{% static 'plugins/jquery-knob/jquery.knob.min.js' %}"></script>
    <!-- daterangepicker -->
    <script src="{% static 'plugins/moment/moment.min.js' %}"></script>
    <script src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>
    <!-- Tempusdominus Bootstrap 4 -->
    <script src="{% static 'plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
    <!-- Summernote -->
    <script src="{% static 'plugins/summernote/summernote-bs4.min.js' %}"></script>
    <!-- overlayScrollbars -->
    <script src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="{% static 'dist/js/pages/dashboard.js' %}"></script>
  
  {% endblock extra_scripts %}

